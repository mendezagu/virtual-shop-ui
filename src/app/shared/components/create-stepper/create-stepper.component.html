<div class="flex flex-col min-h-[100dvh] bg-neutral-50">
  <main class="flex-1 relative w-full">
    <div class="max-w-5xl mx-auto p-4 sm:p-6 lg:p-8 transition-all duration-300">
      <!-- ðŸ’» Tabs horizontales en desktop -->
      <p-tabView
        [(activeIndex)]="activeStepIndex"
        class="rounded-2xl shadow-sm bg-white overflow-hidden border border-slate-200"
      >
        <p-tabPanel header="InformaciÃ³n bÃ¡sica">
          <app-basic-store-info (saved)="onBasicInfoSaved($event)"></app-basic-store-info>
        </p-tabPanel>

        <p-tabPanel header="Contacto">
          <app-store-contact
            [storeData]="storeData"
            (saved)="onStepSaved()"
            (back)="goPrev()"
          ></app-store-contact>
        </p-tabPanel>

        <p-tabPanel header="UbicaciÃ³n y horarios">
          <app-store-ubication-schedule
            [storeData]="storeData"
            (saved)="onStepSaved()"
            (back)="goPrev()"
          ></app-store-ubication-schedule>
        </p-tabPanel>

        <p-tabPanel header="PersonalizaciÃ³n">
          <app-store-personalization
            [storeData]="storeData"
            (saved)="onStepSaved()"
            (back)="goPrev()"
          ></app-store-personalization>
        </p-tabPanel>
      </p-tabView>
    </div>

    <!-- ðŸ“± FAB visible solo en mobile -->
    <button
      (click)="openMobileSteps()"
      class="fixed bottom-6 right-6 lg:hidden z-40 rounded-full bg-gradient-to-r from-pink-500 to-purple-600 p-4 shadow-xl text-white hover:opacity-90 focus:outline-none focus:ring-4 focus:ring-pink-200 transition"
      aria-label="Abrir pasos"
    >
      <i class="pi pi-bars text-lg"></i>
    </button>

    <!-- ðŸ”² Overlay al abrir el panel lateral -->
    <div
      *ngIf="mobileStepsOpen"
      class="fixed inset-0 bg-black/40 z-30 lg:hidden transition-opacity"
      (click)="closeMobileSteps()"
    ></div>

    <!-- ðŸ“‹ Panel lateral (mobile) -->
    <div
      *ngIf="mobileStepsOpen"
      class="fixed top-0 left-0 h-full w-72 sm:w-80 bg-white shadow-2xl z-40 p-6 transform transition-transform duration-300 ease-in-out lg:hidden"
      [ngClass]="mobileStepsOpen ? 'translate-x-0' : '-translate-x-full'"
    >
      <div class="flex items-center justify-between mb-6">
        <h2 class="text-lg font-semibold text-slate-800">Pasos</h2>
        <button
          (click)="closeMobileSteps()"
          aria-label="Cerrar"
          class="text-slate-500 hover:text-slate-700"
        >
          <i class="pi pi-times text-lg"></i>
        </button>
      </div>

      <ul class="space-y-3">
        <li
          *ngFor="let step of stepTitles; let i = index"
          (click)="activeStepIndex = i; closeMobileSteps()"
          class="flex items-center gap-3 p-2 rounded-lg cursor-pointer transition"
          [ngClass]="
            activeStepIndex === i
              ? 'bg-pink-100 text-pink-700 font-medium'
              : 'text-slate-600 hover:bg-slate-100'
          "
        >
          <i
            class="pi text-sm"
            [ngClass]="{
              'pi-info-circle': i === 0,
              'pi-phone': i === 1,
              'pi-map-marker': i === 2,
              'pi-palette': i === 3
            }"
          ></i>
          <span>{{ step }}</span>
        </li>
      </ul>
    </div>
  </main>
</div>
