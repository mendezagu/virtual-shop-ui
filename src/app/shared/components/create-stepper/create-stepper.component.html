<div class="flex min-h-[100dvh] bg-neutral-50">
  <!-- Sidebar Stepper (solo visible en desktop) -->
  <aside
    class="hidden md:block w-80 shrink-0 border-r border-slate-200 bg-white sticky top-0 h-screen p-6 shadow-sm"
  >
    <div class="mb-6">
      <h2 class="text-xl font-bold text-slate-800">Crear tienda</h2>
      <p class="text-sm text-slate-500">Completá los pasos para publicar</p>
    </div>

    <p-stepper
      orientation="vertical"
      [(activeStep)]="activeStepIndex"
      styleClass="modern-stepper"
    >
      <p-stepperPanel header="Información básica"></p-stepperPanel>
      <p-stepperPanel header="Contacto"></p-stepperPanel>
      <p-stepperPanel header="Ubicación y horarios"></p-stepperPanel>
    </p-stepper>
  </aside>

  <!-- Contenido dinámico -->
  <main class="flex-1 relative">
    <div class="max-w-3xl mx-auto">
      <div class="mb-6">
        <h1 class="text-2xl font-semibold text-slate-800">
          {{ stepTitles[activeStepIndex] }}
        </h1>
        <p class="text-sm text-slate-500">
          {{ stepSubtitles[activeStepIndex] }}
        </p>
      </div>

      <!-- Contenido renderizado -->
      <div
        class="rounded-2xl border border-slate-200 bg-white shadow-sm  relative"
      >
        <ng-container [ngSwitch]="activeStepIndex">
          <app-basic-store-info
            *ngSwitchCase="0"
            (saved)="goNext()"
          ></app-basic-store-info>

          <app-store-contact
            *ngSwitchCase="1"
            (saved)="goNext()"
            (back)="goPrev()"
          ></app-store-contact>

          <app-store-ubication-schedule
            *ngSwitchCase="2"
            (saved)="goNext()"
            (back)="goPrev()"
          ></app-store-ubication-schedule>
        </ng-container>
      </div>
    </div>

    <!-- FAB (solo en mobile) -->
    <button
      (click)="openMobileSteps()"
      class="fixed bottom-6 right-6 md:hidden rounded-full bg-indigo-600 p-4 shadow-lg text-white hover:bg-indigo-700 focus:outline-none"
      aria-label="Abrir pasos"
    >
      <i class="pi pi-bars text-lg"></i>
    </button>

    <!-- Overlay para mobile -->
    <div
      *ngIf="mobileStepsOpen"
      class="fixed inset-0 bg-black/40 z-40 md:hidden"
      (click)="closeMobileSteps()"
    ></div>

    <!-- Stepper en mobile (slide-in) -->
    <div
      *ngIf="mobileStepsOpen"
      class="fixed top-0 left-0 h-full w-72 bg-white shadow-lg z-50 p-6 transition-transform transform md:hidden"
    >
      <div class="flex items-center justify-between mb-6">
        <h2 class="text-lg font-bold text-slate-800">Pasos</h2>
        <button (click)="closeMobileSteps()" aria-label="Cerrar">
          <i class="pi pi-times text-slate-500 hover:text-slate-700"></i>
        </button>
      </div>

      <p-stepper
        orientation="vertical"
        [(activeStep)]="activeStepIndex"
        styleClass="modern-stepper"
      >
        <p-stepperPanel header="Información básica"></p-stepperPanel>
        <p-stepperPanel header="Contacto"></p-stepperPanel>
        <p-stepperPanel header="Ubicación y horarios"></p-stepperPanel>
      </p-stepper>
    </div>
  </main>
</div>
