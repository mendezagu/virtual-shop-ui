<div class="mt-5 px-4 sm:px-8 w-full">
  <!-- ===== CONTENIDO PRINCIPAL ===== -->
  <div class="flex flex-col lg:grid lg:grid-cols-5 gap-8 items-start w-full">
    <!-- ===== FORMULARIO ===== -->
    <div class="lg:col-span-3 flex flex-col w-full">
      <!-- Encabezado -->
      <div class="flex gap-3 font-semibold items-center mb-3">
        <i class="pi pi-question-circle text-gray-600 text-lg"></i>
        <span class="text-gray-700">Informaci√≥n adicional</span>
      </div>

      <!-- Card informativa -->
      <div
        class="rounded-2xl border border-gray-200 bg-white shadow-md p-5 transition-shadow duration-300 hover:shadow-lg"
      >
        <div class="flex gap-1 mb-4">
          <i class="pi pi-info-circle text-gray-500 mt-1"></i>
          <small class="block text-gray-500 leading-relaxed font-medium">
            Al finalizar la informaci√≥n b√°sica, se generar√° tu enlace
            personalizado basado en el nombre de tu tienda para que puedas
            acceder y comenzar a usar tu tienda digital al instante.
          </small>
        </div>

        <div class="flex gap-1">
          <i class="pi pi-mobile text-gray-500 mt-1"></i>
          <small class="block text-gray-500 leading-relaxed font-medium">
            Podes previsualizar en tiempo real los datos ingresados con el
            simulador de tu tienda que se encuentra en la seccion final de la
            pagina.
          </small>
        </div>
      </div>

      <!-- Descripci√≥n general -->
      <div class="mb-5 mt-6">
        <p class="text-sm text-slate-500 mt-1">
          Visualiz√° y edit√° los datos principales. Pod√©s ajustar el rubro y la
          descripci√≥n cuando quieras.
        </p>
      </div>

      <!-- Formulario -->
      <form
        [formGroup]="storeForm"
        (ngSubmit)="saveChanges()"
        class="space-y-6 w-full"
      >
        <!-- Nombre tienda y link -->
        <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
          <div class="flex flex-col">
            <label class="font-medium">Nombre de la tienda</label>
            <small class="text-gray-600">Ingres√° el nombre de tu tienda</small>
            <input
              pInputText
              class="w-full"
              formControlName="nombre_tienda"
              placeholder="Ej: Hamburgueser√≠a ¬°Qu√© rico!"
              type="text"
            />
          </div>

          <div class="flex flex-col">
            <label class="font-medium">Link de la tienda</label>
            <small class="text-gray-600">Usamos el nombre de tu tienda</small>
            <input
              pInputText
              class="w-full"
              formControlName="link_tienda"
              placeholder="https://mitienda.com"
              type="text"
              readonly
            />
          </div>
        </div>

  <!-- Rubro -->
<div class="flex flex-col">
  <label class="font-medium">Rubros</label>
  <small class="text-gray-600">
    Seleccion√° uno o varios rubros a los que pertenece tu tienda
  </small>

  <p-multiSelect
    [options]="categories"
    formControlName="rubro"
    optionLabel="name"
    display="chip"
    [filter]="true"
    [showClear]="true"
    placeholder="Seleccion√° uno o m√°s rubros"
    class="w-full"
  ></p-multiSelect>
</div>


        <!-- Descripci√≥n -->
        <div>
          <label class="font-medium">Descripci√≥n</label>
          <small class="text-gray-600"
            >Escrib√≠ una breve descripci√≥n de tu tienda</small
          >
          <p-editor
            formControlName="descripcion"
            [style]="{ height: '200px' }"
          ></p-editor>
        </div>
      </form>
    </div>

    <!-- ===== VISTA PREVIA (desktop) ===== -->
    <div
      class="lg:col-span-2 flex justify-center lg:justify-end w-full mt-6 lg:mt-0"
    >
      <div
        class="relative w-[320px] aspect-[9/16] bg-black rounded-[2.3rem] shadow-2xl border-[10px] border-black overflow-hidden transform scale-95 lg:scale-100 transition-transform duration-300"
      >
        <!-- Pantalla -->
        <div
          class="absolute inset-0 bg-white rounded-[2rem] overflow-hidden flex flex-col"
        >
          <!-- üîù Toolbar superior -->
          <div
            class="flex items-center justify-between px-3 py-2 bg-white border-b border-slate-200"
          >
            <i class="pi pi-bars text-slate-600 text-sm"></i>

            <div class="flex items-center justify-center mt-3">
              <div
                class="flex items-center justify-center bg-yellow-400 text-white font-bold text-[10px] rounded-full w-7 h-7"
              >
                P
              </div>
              <span class="ml-1 text-[11px] font-semibold text-slate-700"
                >PediApp</span
              >
            </div>

            <span class="text-transparent text-sm">‚Ä¢‚Ä¢‚Ä¢</span>
          </div>

          <!-- üì± Contenido -->
          <div class="flex flex-col text-center p-4 pt-5">
            <h3
              class="text-[15px] font-bold text-slate-800 leading-tight mb-1 truncate flex items-start justify-start"
            >
              {{ storeForm.value.nombre_tienda || "Nombre de tienda" }}
            </h3>

            <p
              class="text-[11px] text-slate-500 mb-2 flex items-start justify-start"
            >
              {{ storeForm.value.rubro?.name || "Rubro no seleccionado" }}
            </p>

            <!-- üìù Descripci√≥n -->
            <p
              class="text-[12px] text-slate-600 leading-snug px-2 line-clamp-6 text-left"
              [innerHTML]="
                storeForm.value.descripcion &&
                storeForm.value.descripcion.trim().length > 0
                  ? storeForm.value.descripcion
                  : 'Agreg√° una descripci√≥n de tu tienda para que tus clientes la conozcan mejor.'
              "
            ></p>
          </div>

          <!-- Skeleton simulado -->
          <div class="px-3">
            <small class="text-gray-500 font-medium"
              >Contenido de tu tienda</small
            >
            <p-skeleton styleClass="mb-2" />
            <p-skeleton width="10rem" styleClass="mb-2" />
            <p-skeleton width="5rem" styleClass="mb-2" />
            <p-skeleton height="2rem" styleClass="mb-2" />
            <p-skeleton width="10rem" height="4rem" />
          </div>
        </div>

        <!-- üî≥ Notch superior -->
        <div
          class="absolute top-0 left-1/2 -translate-x-1/2 w-28 h-4 bg-black rounded-b-2xl"
        ></div>
      </div>
    </div>
  </div>

  <!-- ===== BOTONES FINALES ===== -->
  <div
    class="flex flex-row justify-end items-center gap-3 mt-8 w-full lg:max-w-5xl mx-auto flex-wrap"
  >
    <p-button
      type="button"
      label="Atr√°s"
      severity="secondary"
      [outlined]="true"
      [rounded]="true"
      size="small"
      class="flex-1 sm:flex-none min-w-[120px]"
    ></p-button>

    <p-button
      type="button"
      (click)="saveChanges()"
      [disabled]="storeForm.invalid || isLoading"
      [label]="storeData ? 'Actualizar datos' : 'Siguiente paso'"
      severity="success"
      [rounded]="true"
      size="small"
      class="flex-1 sm:flex-none min-w-[120px]"
    ></p-button>
  </div>
</div>
